<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Research and commentary from Barkertons on commercial real estate markets, land development strategy and land value and overseas opportunities including Brazil and New Zealand.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Insights | Barkertons Property</title>
  
  <!-- GOOGLE FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;500;600&family=Inknut+Antiqua:wght@400;600&display=swap" rel="stylesheet">

  <!-- MAIN SITE CSS -->
  <link rel="stylesheet" href="../assets/css/styles.css">

  <!-- INSIGHTS PAGE CSS -->
  <link rel="stylesheet" href="insights.css">
</head>

  <script src="../assets/js/main.js" defer></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  fetch('JS/insights-data.json')
    .then(res => res.json())
    .then(data => {
      const track = document.querySelector('.home-carousel .carousel-track');
      if (!track) return;

      data.forEach(item => {
        const card = document.createElement('div');
        card.className = 'project-box'; // matches main.js carousel code
        card.innerHTML = `
          <a href="${item.link}">
            <img src="${item.image}" alt="${item.title}">
            <h3>${item.title}</h3>
            <p>${item.summary}</p>
          </a>
        `;
        track.appendChild(card);
      });
    })
    .catch(err => console.error('Failed to load Insights JSON:', err));
});
</script>

<body>

<div id="header" style="height:90px;"></div>

<main class="insights-page">
  <h1 class="insights-title">Our Insights</h1>

  <!-- Carousel / summary cards container -->
  <section class="home-carousel">
    <div class="carousel-wrapper">
      <button class="carousel-arrow left">&#8249;</button>

      <div class="carousel-track">
        <!-- Cards are dynamically added here by JS -->
      </div>

      <button class="carousel-arrow right">&#8250;</button>
    </div>
  </section>
</main>

<div id="footer"></div>

<script>
// Load header and footer
function loadHTML(id, file) {
  fetch(file)
    .then(response => response.text())
    .then(data => document.getElementById(id).innerHTML = data)
    .catch(err => console.error(`Failed to load ${file}:`, err));
}
loadHTML('header', '../header.html');
loadHTML('footer', '../footer.html');

// Load carousel cards from JSON
fetch('JS/insights-data.json')
  .then(res => res.json())
  .then(data => {
    const track = document.querySelector('.carousel-track');
    data.forEach(item => {
      const card = document.createElement('div');
      card.className = 'project-box'; // matches insights.css
      card.innerHTML = `
        <a href="${item.link}">
          <img src="${item.image}" alt="${item.title}">
          <h3>${item.title}</h3>
          <p>${item.summary}</p>
        </a>
      `;
      track.appendChild(card);
    });

    // Arrow scroll functionality
    const leftArrow = document.querySelector('.carousel-arrow.left');
    const rightArrow = document.querySelector('.carousel-arrow.right');

    const cardWidth = track.querySelector('.project-box').offsetWidth + 30; // card width + gap

    leftArrow.addEventListener('click', () => {
      track.scrollBy({ left: -cardWidth, behavior: 'smooth' });
    });

    rightArrow.addEventListener('click', () => {
      track.scrollBy({ left: cardWidth, behavior: 'smooth' });
    });
  })
  .catch(err => console.error('Failed to load carousel JSON:', err));
</script>
